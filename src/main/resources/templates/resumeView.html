<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>履歴書ビュー</title>
    <link rel="stylesheet" th:href="@{/css/resumeView.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>

<body>
    <div class="container a4-container">
        <div class="header">
            <a th:href="@{/login}" class="cancel-button">戻る</a>

            <div class="header-buttons">
                <button type="button" onclick="window.print()" class="print-button">印刷</button>
                <button type="button" class="export-button">EXCEL Export</button>
                <button type="button" th:onclick="|window.location.href='@{/resume/form(userId=${resumeDto.userInfo.userId})}'|" class="edit-button">編集</button>
            </div>
        </div>

        <div class="resume-view" th:if="${resumeDto != null}">
            <!-- Personal Information Section -->
            <section class="personal-info">
                <h2>人的情報</h2>
                <div class="info-group">
                    <p><strong>名前(漢字):</strong> <span th:text="${resumeDto.userInfo.userName}">名前</span></p>
                    <p><strong>名前(ローマ字):</strong> <span th:text="${resumeDto.userInfo.userNameRomaji}">ローマ字</span></p>
                    <p><strong>性別:</strong>
                        <span th:text="${resumeDto.userInfo.gender} ? '女性' : '男性'">性別</span>
                    </p>
                    <p><strong>生年月日:</strong> <span th:text="${resumeDto.userInfo.birthDate}">生年月日</span></p>
                    <p><strong>国籍:</strong> <span th:text="${resumeDto.userInfo.nationality}">国籍</span></p>
                    <p><strong>配偶者:</strong>
                        <span th:text="${resumeDto.userInfo.spouse} ? '有' : '無'">配偶者</span>
                    </p>
                </div>
                <div class="info-group">
                    <p><strong>現住所:</strong> <span th:text="${resumeDto.userInfo.currentAddress}">現住所</span></p>
                    <p><strong>最寄り駅:</strong> <span th:text="${resumeDto.userInfo.nearestStation}">最寄り駅</span></p>
                </div>
            </section>

            <!-- Education Section -->
            <section class="education">
                <h2>学歴</h2>
                <div class="info-group">
                    <p><strong>区分:</strong> <span th:text="${resumeDto.userInfo.lastSchoolType}">区分</span></p>
                    <p><strong>学校名:</strong> <span th:text="${resumeDto.userInfo.lastSchool}">学校名</span></p>
                    <p><strong>卒業年月:</strong> <span th:text="${resumeDto.userInfo.graduationDate}">卒業年月</span></p>
                    <p><strong>専攻名:</strong> <span th:text="${resumeDto.userInfo.major}">専攻名</span></p>
                </div>
            </section>

            <!-- Experience Sections -->
            <section class="experience">
                <h2>経歴</h2>
                <div th:each="project, iterStat : ${resumeDto.projects}">
                    <div class="experience-item">
                        <h3>プロジェクト <span th:text="${iterStat.index + 1}">1</span></h3>
                        <p><strong>プロジェクト名:</strong> <span th:text="${project.projectName}">プロジェクト名</span></p>
                        <p><strong>作業場所:</strong> <span th:text="${project.location}">作業場所</span></p>
                        <p><strong>開始日:</strong> <span th:text="${project.startDate}">開始日</span></p>
                        <p><strong>終了日:</strong> <span th:text="${project.endDate}">終了日</span></p>
                        <p><strong>担当したプロセス:</strong>
                            <span th:text="${#strings.arrayJoin(project.processes, ', ')}">プロセス</span>
                        </p>
                        <p><strong>選択したスキル:</strong>
                            <span th:text="${#strings.arrayJoin(project.skills, ', ')}">スキル</span>
                        </p>
                        <p><strong>担当業務:</strong></p>
                        <p th:text="${project.responsibility}">担当業務内容</p>
                    </div>
                </div>
            </section>

            <!-- Summary Section -->
            <section class="summary">
                <h2>自己PR</h2>
                <div class="info-group">
                    <p th:text="${resumeDto.userInfo.selfPr}">自己PR内容</p>
                </div>
            </section>
        </div>
        <div th:if="${resumeDto == null}">
            <p>履歴書が見つかりません。<a th:href="@{/resume/form}">新規作成</a></p>
        </div>
    </div>
</body>

</html>