<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>スキル管理</title>
    <link rel="stylesheet" th:href="@{/css/skillMain.css}">
    <script>
        function confirmAction(action) {
            return confirm(action + "しますか?");
        }
    </script>
</head>
<body>
    <div class="skills-management-container">
        <div class="header">
            <a th:href="@{/login}" class="cancel-button">戻る</a>
        </div>
        <h2>スキル管理</h2>
        <form th:action="@{/skill/add}" th:object="${skillDto}" method="post" class="add-skill-form">
            <div class="input-group">
                <label>
                    スキル名:
                    <input type="text" th:field="*{name}" placeholder="スキル名" required>
                </label>
                <label>
                    カテゴリ:
                    <select th:field="*{category}">
                        <option value="language">Language</option>
                        <option value="db">DB</option>
                        <option value="os">OS</option>
                        <option value="tool">Tool</option>
                        <option value="hw">HW</option>
                    </select>
                </label>
                <button type="submit">追加</button>
            </div>
        </form>

        <table>
            <thead>
                <tr>
                    <th>スキル名</th>
                    <th>カテゴリ</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                <!-- language category -->
                <tr th:each="skill : ${skillsByCategory['language']}">
                    <td th:text="${skill.name}"></td>
                    <td th:text="${skill.category}"></td>
                    <td>
                        <form th:action="@{/skill/delete/{id}(id=${skill.id})}" method="post" onsubmit="return confirmAction('削除')">
                            <button type="submit">削除</button>
                        </form>
                    </td>
                </tr>
                <!-- DB, OS, Tools category -->
                <tr th:each="skill : ${skillsByCategory['db']}">
                    <td th:text="${skill.name}"></td>
                    <td th:text="${skill.category}"></td>
                    <td>
                        <form th:action="@{/skill/delete/{id}(id=${skill.id})}" method="post" onsubmit="return confirmAction('削除')">
                            <button type="submit">削除</button>
                        </form>
                    </td>
                </tr>
                <tr th:each="skill : ${skillsByCategory['os']}">
                    <td th:text="${skill.name}"></td>
                    <td th:text="${skill.category}"></td>
                    <td>
                        <form th:action="@{/skill/delete/{id}(id=${skill.id})}" method="post" onsubmit="return confirmAction('削除')">
                            <button type="submit">削除</button>
                        </form>
                    </td>
                </tr>
                <tr th:each="skill : ${skillsByCategory['tool']}">
                    <td th:text="${skill.name}"></td>
                    <td th:text="${skill.category}"></td>
                    <td>
                        <form th:action="@{/skill/delete/{id}(id=${skill.id})}" method="post" onsubmit="return confirmAction('削除')">
                            <button type="submit">削除</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>
