<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Resume Form</title>
    <link rel="stylesheet" th:href="@{/css/resumeForm.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="/js/resumeForm.js" defer></script>
</head>
<body>
    <div class="container a4-container">
        <div class="header">
            <button type="submit" form="resume-form" class="save-button">保存</button>
            <button type="button" class="export-button">EXCEL Export</button>
        </div>
        
        <form id="resume-form" th:action="@{/resume/save}" th:object="${resumeDto}" method="post">
            <!-- Personal Information Section -->
            <section class="personal-info">
                <h2>人的情報</h2>
                <div class="input-group">
                    <label>
                        名前(漢字)
                        <input type="text" name="userInfo.userName" placeholder="" required>
                    </label>
                    <label>
                        名前(ローマ字)
                        <input type="text" name="userInfo.userNameRomaji" placeholder="" required>
                    </label>
                    <label>
                        性別
                        <select name="userInfo.gender" required>
                            <option value="false" selected>男性</option>
                            <option value="true">女性</option>
                        </select>
                    </label>
                    <label>
                        生年月日
                        <input type="date" name="userInfo.birthDate" required>
                    </label>
                    <label>
                        国籍
                        <input type="text" name="userInfo.nationality" placeholder="">
                    </label>
                    <label>
                        配偶者
                        <select name="userInfo.spouse">
                            <option value="false" selected>無</option>
                            <option value="true">有</option>
                        </select>
                    </label>
                </div>
                <div class="input-group">
                    <label>
                        現住所
                        <input type="text" name="userInfo.currentAddress" placeholder="">
                    </label>
                    <label>
                        最寄り駅
                        <input type="text" name="userInfo.nearestStation" placeholder="">
                    </label>
                </div>
            </section>

            <!-- Education Section -->
            <section class="education">
                <h2>学歴</h2>
                <div class="input-group">
                    <label>
                        区分
                        <select name="userInfo.lastSchoolType">
                            <option value="4年制" selected>4年制</option>
                            <option value="2年制">2年制</option>
                        </select>
                    </label>
                    <label>
                        学校名
                        <input type="text" name="userInfo.lastSchool" placeholder="">
                    </label>
                    <label>
                        卒業年月
                        <input type="date" name="userInfo.graduationDate">
                    </label>
                    <label>
                        専攻名
                        <input type="text" name="userInfo.major" placeholder="">
                    </label>
                </div>
            </section>

            <!-- Experience Sections -->
            <div id="experience-sections">
                <section class="experience">
                    <h2>経歴</h2>
                    <div class="input-group">
                        <label>
                            プロジェクト名
                            <input type="text" name="projects[0].projectName" placeholder="">
                        </label>
                        <label>
                            作業場所
                            <input type="text" name="projects[0].location" placeholder="">
                        </label>
                        <label>
                            開始日
                            <input type="date" name="projects[0].startDate">
                        </label>
                        <label>
                            終了日
                            <input type="date" name="projects[0].endDate">
                        </label>
                    </div>
                    <div class="input-group">
                        <label>
                            担当したプロセス
                            <div class="process-chips" id="process-chips-0">
                                <span class="process-chip">調査分析</span>
                                <span class="process-chip">設計</span>
                                <span class="process-chip">開発</span>
                                <span class="process-chip">テスト</span>
                                <span class="process-chip">運用保守</span>
                            </div>
                            <input type="hidden" name="projects[0].processes" id="projects[0].processes">
                        </label>
                    </div>
                    <div class="input-group tech">
                        <label class="skill-label">
                            選択したスキル
                            <div class="skill-display" id="selected-skills-0"></div>
                            <input type="hidden" name="projects[0].skills" id="projects[0].skills">
                        </label>
                        <button type="button" class="skill-add-button" onclick="openSkillPopup(0)">スキル追加</button>
                    </div>
                    <div class="responsibility">
                        <textarea name="projects[0].responsibility" placeholder="担当した業務を簡単に記入してください。" maxlength="500" style="overflow: hidden; resize: none;"></textarea>
                    </div>
                </section>
            </div>
            <button type="button" class="history-add-button">経歴追加</button>

            <!-- Summary Section -->
            <section class="summary">
                <h2>自己PR</h2>
                <div class="input-group">
                    <label>
                        自己PR
                        <textarea name="userInfo.selfPr" placeholder="簡単に自己PRしてください。" style="overflow: hidden; resize: none;"></textarea>
                    </label>
                </div>
            </section>
        </form>

        <!-- Skill Popup Modal -->
        <div id="skill-popup" class="modal">
            <div class="modal-content">
                <span class="close-button" onclick="closeSkillPopup()">&times;</span>
                <h2>スキル追加</h2>
                <div class="skill-category">
                    <h3>Language</h3>
                    <div class="skill-chips" id="language-skills">
                        <!-- Example Chips -->
                        <span class="skill-chip">JavaScript</span>
                        <span class="skill-chip">Python</span>
                        <span class="skill-chip">Java</span>
                    </div>
                </div>
                <div class="skill-category">
                    <h3>DB</h3>
                    <div class="skill-chips" id="db-skills">
                        <span class="skill-chip">MySQL</span>
                        <span class="skill-chip">PostgreSQL</span>
                        <span class="skill-chip">MongoDB</span>
                    </div>
                </div>
                <div class="skill-category">
                    <h3>OS</h3>
                    <div class="skill-chips" id="os-skills">
                        <span class="skill-chip">Linux</span>
                        <span class="skill-chip">Windows</span>
                        <span class="skill-chip">macOS</span>
                    </div>
                </div>
                <div class="skill-category">
                    <h3>Tools</h3>
                    <div class="skill-chips" id="tool-skills">
                        <span class="skill-chip">Docker</span>
                        <span class="skill-chip">Kubernetes</span>
                        <span class="skill-chip">Git</span>
                    </div>
                </div>
                <button type="button" class="apply-button">適用</button>
            </div>
        </div>
    </div>
</body>
</html>
